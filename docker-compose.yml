services:
  acetate:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - ./album:/album:ro
      - ./data:/data
    environment:
      - ADMIN_TOKEN=${ADMIN_TOKEN}
      - LISTEN_ADDR=:8080
      - ALBUM_PATH=/album
      - DATA_PATH=/data
    restart: unless-stopped

  wizard:
    image: golang:1.24
    working_dir: /src
    command: ["go", "run", "./cmd/setupwizard"]
    stdin_open: true
    tty: true
    profiles: ["tools"]
    volumes:
      - ./:/src
